define(["kernel"],function(t){var e=t.Class.extend({primaryId:0,winEventName:"",enabled:!1,init:function(t,i,n){this.text=t,this.duration=i>=0?i:e.LENGTH_SHORT,this.options=$.extend({onCreate:$.noop,onShow:$.noop,onHide:$.noop,classStyle:"",offset:{bottom:100}},n),this.primaryId=e.primaryId++,this.create()},create:function(){this.element=$(e.TEMPLATE),this.element.addClass(this.options.classStyle).html(this.text),this.options.onCreate.call(this)},show:function(){e.queue.push(this),this.enabled=!0,e.processing||e.show()},hide:function(){this.options.onHide.call(this),this.element.removeClass("show-toast"),t.transitionEnd(this.element,function(){this.element.remove()}.bind(this))},visible:function(e){this.options.onShow.call(this),t.body.append(this.element),t.delay(function(){this.element.addClass("show-toast")}.bind(this),50),t.delay(function(){this.hide(),e()}.bind(this),this.duration)}},{LENGTH_LONG:5e3,LENGTH_SHORT:3e3,TEMPLATE:'<div class="ui-toast"></div>',primaryId:0,queue:[],processing:!1,container:null,makeText:function(t,i,n){return new e(t,i,n)},next:function(){},show:function(){if(!e.queue.length)return void(e.processing=!1);e.processing=!0;var t=e.queue.shift();t&&(t.enabled?t.visible(e.show):e.show())}});return e});