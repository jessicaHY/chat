define(["jquery"],function(n){var e={},t=n(window);return e.win=t,e.body=null,n(function(){e.body=n("body")}),e.Class=e.Class=function(){var n=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,t=function(){};return t.extend=function(t,r){function o(){!n&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;n=!0;var a=new this;n=!1;for(var u in t)a[u]="function"==typeof t[u]&&"function"==typeof i[u]&&e.test(t[u])?function(n,e){return function(){var t=this._super;this._super=i[n];var r=e.apply(this,arguments);return this._super=t,r}}(u,t[u]):t[u];o.prototype=a,o.prototype.constructor=o,o.extend=arguments.callee;for(var c in r)o[c]=r[c];return o.init&&o.init.call(o),o},t}(),e.Service=function(n){return"function"!=typeof n?null:e.Class.extend(n())},e.extend=n.extend,e.error=[],e.register=function(t,r){for(var o=t.split("."),i=e,a=e.error,u=null;u=o.shift();)if(o.length)void 0===i[u]&&(i[u]={}),i=i[u];else if(void 0===i[u]){if("string"==typeof r&&"check"===r)return e.console.log("Property undefined:"+t),n.noop;try{i[u]=r(e)}catch(c){a.push(c)}}else{if("string"==typeof r&&"check"==r)return i[u];console.log("redefined:"+t)}},e.getMethod=function(n){return e.register(n,"check")},e.delay=function(n,e){return setTimeout(n,e||0)},e.loadImage=function(n,e){var t=new Image;t.src=n,t.complete?e.call(t):(t.onload=function(){e.call(t)},t.src=t.src)},e.random=function(n,e){if("number"==typeof n){var t=n||5;return e=e||1,Math.round(Math.random()*Math.pow(10,t))*e}if(("object"==typeof n||"string"==typeof n)&&n.hasOwnProperty("length")){var r="string"==typeof n;r&&(n=n.split(""));var o=[],i={},a=n.length||e||10,u=function(){var n=Math.round(Math.random()*a);return n in i||n==a?u():(i[n]=!0)&&n};if(0==n.length)for(var c=0;a>c;c++)o[c]=u();else for(var c=0;a>c;c++)o.push(n[u()]);return r?o.join(""):o}},e.xresize=function(t,r){var o=null,i=!1,a={init:!0,after:n.noop,before:n.noop,delay:100};return 1==arguments.length?(a.after=t,t="scroll resize"):(t=t||"scroll resize","function"==typeof r?a.after=r:a=n.extend(a,r)),e.win.bind(t,function(n){o&&(clearTimeout(o),o=null),0==i&&(i=!0,a.before.call(e.win,n)),o=e.delay(function(){i=!1,a.after.call(e.win,n)},a.delay)}),a.init&&e.win.trigger(t.split(" ")[0]),e.win},e.xresize.unbind=function(n){e.win.unbind(n)},e.whenSeenElement=function(t,r,o){var t="resize."+t+" scroll."+t;e.xresize(t,function(){e.win.scrollTop()+e.win.height()<r.offset().top||(e.xresize.unbind(t),(o||n.noop)())})},e.animationEnd=function(n,e){var t="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return n.one(t,e),function(){n.unbind(t)}},e.transitionEnd=function(n,e){var t="webkitTransitionEnd oTransitionEnd transitionend";return n.one(t,e),function(){n.unbind(t)}},e.clickAnyWhereHideButMe=function(){var e=0;return function(t,r,o){2==arguments.length&&(o=r,r=null);var i=t&&t.jquery?t[0]:t,a=r&&r.jquery?r[0]:r,u="mousedown.cawhb"+e++;return o=o||n.noop,n(document).bind(u,function(e){(a?e.target==a:0)||e.target==i||n.contains(i,e.target)||o(e,t)}),u}}(),e.unbindDocumentEvent=function(e){n(document).unbind(e)},e.lazyLoad=function(t){t=n.extend({context:null,height:0},t);var r=e.win,o=n(t.context);if(o.length){var i=function(){return document.documentElement.clientHeight+Math.max(document.documentElement.scrollTop,document.body.scrollTop)-t.height},a=function(){o.find("img[orgSrc]").each(function(){if(n(this).offset().top<=i()&&n(this).is(":visible")){var e=this.getAttribute("orgSrc");this.setAttribute("src",e),this.removeAttribute("orgSrc")}})};r.bind("lazyload",a),e.xresize("scroll.lazyload",{after:a})}},e.range=function(n,e,t){t=-1==t?t:1,1==arguments.length&&(e=n,n=0);for(var r=[],o=-1===t,i=n,t=o?1:t;e>i;i+=t)r.push(i);return o?r.reverse():r},e.cookie=function(){function e(n){return n}function t(n){return decodeURIComponent(n.replace(o," "))}function r(n){0===n.indexOf('"')&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return i.json?JSON.parse(n):n}catch(e){}}var o=/\+/g,i=cookie=function(o,a,u){if(void 0!==a){if(u=n.extend({},i.defaults,u),"number"==typeof u.expires){var c=u.expires,s=u.expires=new Date;s.setDate(s.getDate()+c)}return a=i.json?JSON.stringify(a):String(a),document.cookie=[encodeURIComponent(o),"=",i.raw?a:encodeURIComponent(a),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var f=i.raw?e:t,d=document.cookie.split("; "),l=o?void 0:{},p=0,h=d.length;h>p;p++){var g=d[p].split("="),v=f(g.shift()),m=f(g.join("="));if(o&&o===v){l=r(m);break}o||(l[v]=r(m))}return l};i.defaults={};var a=function(e,t){return void 0!==cookie(e)?(cookie(e,"",n.extend(t,{expires:-1})),!0):!1};return cookie.removeCookie=a,cookie}(),e.go=function(n,e){var t=location,r="";return r="me"==n?t.href:/^#/.test(n)?t.origin+t.pathname+n:n,e?window.open(r):t.href=r,t},e.ajax=function(t){if(t.debug){var r=new n.Deferred,o=t.statusCode||200,i=t.delay||300;switch(o){case 200:e.delay(function(){r.resolve({code:1})},i);break;case 403:case 404:case 500:e.delay(function(){r.reject({code:0})},i)}return r}return n.ajax(t)},e.upload=function(e,t,r){r=n.extend({progress:n.noop,load:n.noop,error:n.noop,abort:n.noop},r);var o=new FormData;n.each(t,function(n,e){o.append(n,e)});var i=new XMLHttpRequest;return i.addEventListener("load",function(n){r.load.call(n,n.currentTarget.responseText)},!1),i.addEventListener("error",r.error,!1),i.upload.addEventListener("progress",function(n){r.progress.call(n,Math.ceil(n.loaded/n.total*100),i)},!1),i.addEventListener("abort",r.abort,!1),i.open("post",e,!0),i.send(o),i},e.fileSize=function(n){return{M:Math.round(n/1024/1024),KB:Math.round(n/1024)}},e});